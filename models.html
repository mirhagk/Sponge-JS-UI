
<template name="models">
    <table>
        <tr>
            <td colspan="2">{{pagination}}</td>
        </tr>
        <tr valign="top">
            <td>
                {{#each modelNames}}
                    <div class="modelId">
                        <a class="{{#if active}}active{{/if}}" href="#">{{name}}</a>
                    </div>
                {{/each}}
            </td>
            <td>
                {{#if currentModelId}}
                    {{#with currentModel}}
                        {{> model}}
                    {{else}}
                        {{> loading}}
                    {{/with}}
                {{/if}}
            </td>
        </tr>
    </table>
</template>

<template name="model">
    <table>
        {{> modelChangedRow}}
        <tr>
            <th align="right">Name:</th><td>{{> edit Name}} <span class="id">({{_id}})</span></td>
        </tr>
        <tr>
            <th align="right">Description:</th><td>{{> edit Description}}</td>
        </tr>
        <tr>
            <th align="right">Last Changed:</th><td>{{timeStamp}}</td>
        </tr>
        <tr valign="top">
            <th align="right">Arguments:</th><td>
                <table>
                    {{#each args}}
                        {{> edit this}}
                    {{/each}}
                </table>
            </td>
        </tr>
        <tr valign="top">
            <th align="right">Result:</th><td>
                <table>
                    {{#each result}}
                        {{> edit this}}
                    {{/each}}
                </table>
            </td>
        </tr>
        <tr valign="top">
            <th align="right">Body:</th><td>
                {{#if editFunction}}
                    <div class="full-screen-editor">
                        {{> jsEditor functionCode}}
                    </div>
                {{else}}
                    <div class="js-editor-container">
                        <pre class="pre-scrollable"><code class="javascript">{{bodyEscaped}}</code></pre>
                    </div>
                {{/if}}
            </td>
        </tr>
        <tr>
            <th align="right">Inputs:</th><td>{{isTemplate}}</td>
        </tr>
    </table>
</template>

<template name="modelChangedRow">
    <tr>
        <td></td><td><button class="btn btn-mini {{class}} save" type="button">Save changes</button></td>
    </tr>
</template>
