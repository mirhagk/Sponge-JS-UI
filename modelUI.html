<head>
  <title>modelUI</title>
</head>

<body>
    {{> main}}
</body>

<template name="loading">
    <div class="loading">
        {{> loadingImg}}
    </div>
</template>

<template name="loadingImg">
    <img src="skin/loading.gif" />
</template>

<template name="main">
    <div class="tabbable tabs-left main-menu">
        <ul class="nav nav-tabs">
            {{#each menu}}
                <li class="{{active id}}"><a data-toggle="tab" href="#">{{title}}</a></li>
            {{/each}}
        </ul>
        <div class="tab-content">
            {{#each menu}}
                <div class="{{id}} {{active id}} tab-pane">
                    {{#if enabled id}}
                        {{menuContent id}}
                    {{/if}}
                </div>
            {{/each}}
        </div>
</template>

<template name="dataObjects">
    <table>
        <tr valign="top">
            <td>
                {{#if schemas}}
                    <div class="dropdown">
                        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">{{#if currentTypeVersion}}{{currentTypeVersion}}{{else}}Bitte w&auml;hlen{{/if}} <span class="caret"></span></a>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
                            {{#each schemas}}
                                <li class="dropdown-submenu">
                                    <a tabindex="-1" href="#">{{type}}</a>
                                    <ul class="dropdown-menu">
                                        {{#each versions}}
                                            <li><a tabindex="-1" href="#">Version {{version}}</a>
                                        {{/each}}
                                    </ul>
                                </li>
                            {{/each}}
                        </ul>
                    </div>
                {{else}}
                    {{> loading}}
                {{/if}}
            </td>
            <td>
                {{currentObjectId}}
            </td>
        </tr>
        {{#if currentTypeVersion}}
            <tr valign="top">
                <td colspan="2">
                    {{pagination}}
                </td>
            </tr>
        {{/if}}
        <tr valign="top">
            <td>
                {{#if objectIds}}
                    <div class="objectIds">
                        {{#each objectIds}}
                            <a class="{{activeObjectClass this}}" href="#">{{this}}</a><br />
                        {{/each}}
                    </div>
                {{else}}
                    {{> loading}}
                {{/if}}
            </td>
            <td>
                {{#with currentObjectId}}
                    {{> dataObject}}
                {{/with}}
            </td>
        </tr>
    </table>
</template>

<template name="dataObject">
    {{#with dataObject this}}
        <table>
            <tr><td>Type/Version:</td><td>{{objectType}} Version {{version}}</td></tr>
            <tr><td>Description:</td><td>{{description}}</td></tr>
            <tr><td>Tags:</td><td>{{#each tags}}{{this}}{{/each}}</td></tr>
            <tr><td>Range:</td><td>
                from ({{#each iteratorValues start}}{{#if index}}, {{/if}}{{name}}={{value}}{{unit}}{{else}}{{> loadingImg}}{{/each}})
                until ({{#each iteratorValues end}}{{#if index}}, {{/if}}{{name}}={{value}}{{unit}}{{else}}{{> loadingImg}}{{/each}})
            </td></tr>
            {{#with source}}
                <tr valign="top"><td>Source:</td><td>{{> source}}</td></tr>
            {{/with}}
        </table>
        {{> parameterSets}}
    {{else}}
        {{> loading}}
    {{/with}}
</template>

<template name="source">
    <table>
        <tr><td>Name:</td><td>{{source.Name}}</td></tr>
        <tr><td>Description:</td><td>{{source.Description}}</td></tr>
        <tr><td>Organisation:</td><td>{{source.Organisation}}</td></tr>
        <tr><td>Address:</td><td>{{source.Address}}</td></tr>
        <tr><td>Mail:</td><td><a href="mailto:{{source.Mail}}">{{source.Mail}}</a></td></tr>
        <tr><td>www:</td><td><a target="_blank" href="{{source.www}}">{{source.www}}</a></td></tr>
    </table>
</template>

<template name="parameterSets">
    {{pagination}}
    <table class="parameterSets table table-hover table-striped table-bordered table-condensed">
        {{#each setValues}}
            <tr>
                {{#each this}}
                    <t{{#if header}}h{{else}}d{{/if}} title="{{description}}{{#if unit}} in {{unit}}{{/if}}">
                        {{value}}
                    </t{{#if header}}h{{else}}d{{/if}}>
                {{/each}}
            </tr>
        {{else}}
            <tr><td>{{> loading}}</td></tr>
        {{/each}}
    </table>
</template>
